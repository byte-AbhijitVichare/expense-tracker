{% extends 'base.html' %}
{% block content %}
<section class="filters">
<form method="get">
<label>Month: <input type="month" name="month" value="{{ request.args.get('month','') }}"></label>
<label>Category:
<select name="category">
<option value="">All</option>
{% for c in categories %}
<option value="{{c}}" {% if request.args.get('category')==c %}selected{% endif %}>{{c}}</option>
{% endfor %}
</select>
</label>
<button type="submit">Filter</button>
</form>
</section>


<section class="summary">
<h3>Total: ₹{{ '%.2f'|format(total) }}</h3>
<div class="bycat">
{% for k,v in by_cat.items() %}
<div>{{k}}: ₹{{'%.2f'|format(v)}}</div>
{% endfor %}
</div>
</section>
</script>


<table class="expenses">
<thead><tr><th>Date</th><th>Category</th><th>Amount</th><th>Description</th><th>Actions</th></tr></thead>
<tbody>
{% for e in expenses %}
<tr>
<td>{{ e['date'] }}</td>
<td>{{ e['category'] }}</td>
<td>₹{{ '%.2f'|format(e['amount']) }}</td>
<td>{{ e['description'] }}</td>
<td>
<a href="/edit/{{e['id']}}">Edit</a>
<form method="post" action="/delete/{{e['id']}}" style="display:inline" onsubmit="return confirm('Delete?')">
<button type="submit">Delete</button>
</form>
</td>
</tr>
{% endfor %}
</tbody>
</table>
{% endblock %}